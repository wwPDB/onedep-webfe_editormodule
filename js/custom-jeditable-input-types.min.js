var optsCheckBox={element:function(t,e){var i=$('<input class="select_row" type="checkbox">');return $(this).append(i),i}};$.editable.addInputType("checkbox",optsCheckBox);var optsCalendar={element:function(t,e){var i=$('<input type="text">');return $(this).append(i),i},plugin:function(t,e){$("input",this).datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onSelect:function(){$(this).submit(),$(this).hide()}})}};function split(t){return t.split(/,\s*/)}function extractLast(t){return split(t).pop()}$.editable.addInputType("calendar",optsCalendar);var optsAutoCmplt={element:function(t,e){var i=$('<input type="text">');return $(this).append(i),i},plugin:function(t,e){$("input",this).autocomplete({source:t.autocomplete.source,select:function(t,e){e.item&&($(this).val(e.item.value),$(this).submit())}})}},optsAutoCmpltWthOthr=$.extend({},optsAutoCmplt,{}),optsMultiAutoCmplt=$.extend({},optsAutoCmplt,{plugin:function(i,t){$("input",this).bind("keydown",function(t){t.keyCode===$.ui.keyCode.TAB&&$(this).data("autocomplete").menu.active&&t.preventDefault()}).autocomplete({minLength:0,source:function(t,e){e($.ui.autocomplete.filter(i.autocomplete.source,extractLast(t.term)))},focus:function(){return!1},select:function(t,e){var i=split(this.value);return i.pop(),i.push(e.item.value),i.push(""),this.value=i.join(", "),!1}})}}),optsMultiAutoCmpltWthOthr=$.extend({},optsMultiAutoCmplt,{});$.editable.addInputType("autocomplete",optsAutoCmplt),$.editable.addInputType("autocomplete_w_other",optsAutoCmpltWthOthr),$.editable.addInputType("multi_autocomplete",optsMultiAutoCmplt),$.editable.addInputType("multi_autocomplete_w_other",optsMultiAutoCmplt),$.editable.addInputType("select_w_other",{element:function(settings,original){var selectWithOther=$('<select id="'+settings.select_w_other.id+'">'),origValueOpt,foundOrigValue;if(String==settings.data.constructor)eval("var json = "+settings.data);else var json=settings.data;for(var key in json)original.revert==json[key]&&(foundOrigValue=!0);for(var key in json)if(json.hasOwnProperty(key)&&"selected"!=key){var option=$("<option />").val(key).append(json[key]);selectWithOther.append(option)}foundOrigValue||(origValueOpt=$("<option />").val(original.revert).append(original.revert),selectWithOther.append(origValueOpt));var otherOpt=$("<option />").val("Other").append("Other");return selectWithOther.append(otherOpt),$(this).append(selectWithOther),selectWithOther},submit:function(t,e){},content:function(data,settings,original){if(String==data.constructor)eval("var json = "+data);else var json=data;$("select",this).children().each(function(){if(json.selected){var i=$(this);$.each(json.selected,function(t,e){i.val()==e&&i.prop("selected",!0)})}else-1!=original.revert.indexOf($(this).html())&&$(this).prop("selected",!0)})}});var optsMltiSlct={element:function(t,e){var i=$('<select multiple="multiple" />');return"none"!=t.width&&i.width(t.width),t.size&&i.attr("size",t.size),$(this).append(i),i},content:function(data,settings,original){if(String==data.constructor)eval("var json = "+data);else var json=data;for(var key in json)if(json.hasOwnProperty(key)&&"selected"!=key){var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if(json.selected){var i=$(this);$.each(json.selected,function(t,e){i.val()==e&&i.prop("selected",!0)})}else-1!=original.revert.indexOf($(this).html())&&$(this).prop("selected",!0)})},submit:function(t,e){}},optsMltiSlctWthOthr=$.extend({},optsMltiSlct,{element:function(t,e){var i=$('<select multiple="multiple" class="multi" id="'+t.select_w_other.id+'" />');return"none"!=t.width&&i.width(t.width),t.size&&i.attr("size",t.size),$(this).append(i),i}});function onSubmitSlctWithOther(t,e){var i=$(e).find("select").val(),n=e.revert;return EditorMod.bMultiSlctType=$(e).find("select").hasClass("multi"),-1!="Other".indexOf(i)?(EditorMod.otherValInputId=t.select_w_other.id,EditorMod.bMultiSlctType&&(EditorMod.selectedVals=i.slice()),$("#other-value-form").dialog("open"),!1):(t.logeditfxn(t.cifname,e,n),!0)}function onSubmitAutoCmplt(t,e){var i=$(e).find('[type="text"] ').val();0==i.length&&($(e).find('[type="text"] ').val("?"),i="?");var n=e.revert;return i==n?(e.reset(),!1):"?"!=i&&-1==t.autocomplete.source.indexOf(i)?(alert("Value being submitted: '"+i+"', is not in list of accepted options."),e.reset(),!1):(t.logeditfxn(t.cifname,e,n),!0)}function onSubmitAutoCmpltWithOther(t,e){var i=$(e).find('[type="text"] ').val();0==i.length&&($(e).find('[type="text"] ').val("?"),i="?");var n=e.revert;if(i==n)return e.reset(),!1;if("?"==i||-1!=t.autocomplete.source.indexOf(i)||-1!=EditorMod.autoCmpltOtherVal.indexOf(i))return t.logeditfxn(t.cifname,e,n),!0;var o=confirm("Value being submitted: '"+i+"', is not in list of accepted options. Please confirm that you would like to submit this value.\t");return 1==o?(EditorMod.autoCmpltOtherVal=i,t.logeditfxn(t.cifname,e,n)):(EditorMod.autoCmpltOtherVal="",e.reset()),o}function onSubmitMultiAutoCmplt(t,e){var i,n=$(e).find('[type="text"] ').val(),o=split(n),l=e.revert;o[o.length-1]||o.pop();for(var a=0;a<o.length;a++)if(i=o[a],-1==t.autocomplete.source.indexOf(i))return alert("Value being submitted: '"+i+"', is not in list of accepted options."),!1;return n=o.join(", "),$(e).find('[type="text"] ').val(n),t.logeditfxn(t.cifname,e,l),!0}function onSubmitMultiAutoCmpltWthOthr(t,e){var i,n=$(e).find('[type="text"] ').val(),o=split(n),l=e.revert;o[o.length-1]||o.pop();for(var a=0;a<o.length;a++)if(i=o[a],-1==t.autocomplete.source.indexOf(i)){var r=confirm("Value being submitted: '"+i+"', is not in list of accepted options. Please confirm that you would like to submit this value.\t");return r&&(n=o.join(", "),$(e).find('[type="text"] ').val(n)),r}return n=o.join(", "),$(e).find('[type="text"] ').val(n),t.logeditfxn(t.cifname,e,l),!0}$.editable.addInputType("multiselect",optsMltiSlct),$.editable.addInputType("multiselect_w_other",optsMltiSlctWthOthr);