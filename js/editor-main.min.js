var EditorMod={context:CONTEXT,expmethod:EXPMETHOD,ajaxTimeout:6e4,adminContact:'Send comments to: <a href="mailto:rsala@rcsb.rutgers.edu">help@wwpdb-dev.rutgers.edu</a>',infoStyle:'<span class="ui-icon ui-icon-info fltlft"></span> ',errStyle:'<span class="ui-icon ui-icon-alert fltlft"></span> ',debug:!1,oDataTable:void 0,CtgryConfig:new Object,otherValInputId:"",autoCmpltOtherVal:"",selectedVals:[],bMultiSlctType:!1,bResetDisplay:!0,debugCurrentCtgryNm:"",currentCtgryNms:[],currentRowSlctd:"",currentRowSlctd_TrNode:void 0,currentRowSlctd_CtgryNm:"",arrCtgriesWth3Dcntxt:[],arrReadOnlyCtgries:arrREADONLY_CATGRS,arrAllowLastRowDeleteCtgries:arrCATGRS_CAN_DELETE_LAST_ROW,iSrchHeadersThrshld:"editorconfig"==CONTEXT?45:20,iTransposeThrshld:6,gotoRow:-1,editActnIndx:0,addRowActns:[],deleteRowActns:[],currentMndtryViolations:new Object,currentDictViolations:new Object,dictViolationsTooltip:!1,mndtryViolationsTooltip:!1,turnOffDTmDataConversion:!0,bUseContextMenu:!0,URL:{SEE_RAW_JSON_FOR_DTBL:"/service/editor/test_see_json",DTBL_GET_TMPLT:"/service/editor/get_dtbl_config_dtls",DTBL_GET_MULTI_TMPLT:"/service/editor/get_multi_dtbl_config_dtls",DTBL_AJAX_LOAD:"/service/editor/get_dtbl_data",DTBL_VALIDATE_EDIT:"/service/editor/validate_edit",DTBL_SUBMIT_EDIT:"/service/editor/submit_edit",DTBL_PROPAGATE_TITLE:"/service/editor/propagate_title",DTBL_ACT_ON_ROW:"/service/editor/act_on_row",EXIT_NOT_FINISHED:"/service/editor/exit_not_finished",EXIT_FINISHED:"/service/editor/exit_finished",EXIT_ABORT:"/service/editor/exit_abort",GET_JMOL_SETUP:"/service/editor/get_jmol_setup",GET_CATEGORIES_3D_CNTXT:"/service/editor/get_ctgries_w3dcontext",UNDO_CHANGES:"/service/editor/undo",CHECK_MANDATORY_ITEMS:"/service/editor/check_mandatory_items",CHECK_DICT_VIOLATIONS:"/service/editor/check_dict_violations",SKIP_CALC:"/service/editor/skip_calc",SKIP_CALC_UNDO:"/service/editor/skip_calc_undo",CHECK_SKIP_CALC:"/service/editor/check_skip_calc",INIT_ROLLBACK_POINT:"/service/editor/init_rollback_point",RELOAD_PAGE:"/service/editor/reload"}};Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),String.prototype.startsWith=function(t){return this.match("^"+t)==t},$(document).ready(function(){if($(document).ajaxError(function(t,e,o,r){try{0==e.status?$(".errmsg.glblerr").html(EditorMod.errStyle+"You are offline!!<br />Please Check Your Network.").show().fadeOut(4e3):404==e.status?$(".errmsg.glblerr").html(EditorMod.errStyle+'Requested URL "'+o.url+'" not found.<br />').show().fadeOut(4e3):500==e.status?$(".errmsg.glblerr").html(EditorMod.errStyle+"Internel Server Error.<br />").show().fadeOut(4e3):"parsererror"==t?$(".errmsg.glblerr").html(EditorMod.errStyle+"Error.\nParsing JSON Request failed.<br />").show().fadeOut(4e3):"timeout"==t?$(".errmsg.glblerr").html(EditorMod.errStyle+"Request Time out.<br />").show().fadeOut(4e3):$(".errmsg.glblerr").html(EditorMod.errStyle+e.status+" : "+r+"<br />\n").show().fadeOut(4e3)}catch(t){$(".loading").hide();var i="There was an error while processing your request.\n";i+="Error description: "+t.description+"\n",i+="Click OK to continue.\n",alert(i)}}),getListOfCategoriesWth3DCntxt(),initUIglobalPreDTload(),"editorconfig"==EditorMod.context){var t=["pdbx_display_view_category_info","pdbx_display_view_item_info"],e=["Category View Info","Item View Info"];initUIglobalPreDTload(),initBookKeepingGlobal(),resetDTrsltsArea(),bLastTableLoaded=!1;for(var o=0;o<t.length;o++){$("#dt_rslts_combo").append('<div id="dtbl_'+(o+1)+'" class="atomic_dt_container" style="margin-bottom: 10px; padding: 8px; border-style:solid; border-width:1px; border-color:#c1d6c1;"></div>'),o==t.length-1&&(bLastTableLoaded=!0),loadCategoryDT(t[o],e[o],"dtbl_"+(o+1),bLastTableLoaded)}}$("#editor_pane").on("change","select",function(t){$(this).parent().submit()}),$(".glblchck").click(function(){var t=$(this).attr("id").split("_")[1];"dictconstr"==t?checkForDictViolations("all","manual"):"mndtrydata"==t&&checkForMandatoryItems("all","manual")}),$(".cifctgry_submit_see_json").click(function(){var t=$(this).attr("name");loadTestExampleSeeJson(t)}),$(document).on("click",".check_mandatory_items",function(){var t=$(this).attr("name").split("-")[1];"all"!=t&&(EditorMod.CtgryConfig[t].checkingMndtryItems=!0),checkForMandatoryItems(t,"manual")}),$(document).on("click",".check_dict_violations",function(){var t=$(this).attr("name").split("-")[1];"all"!=t&&(EditorMod.CtgryConfig[t].checkingDictViolations=!0),checkForDictViolations(t,"manual")}),$(".cifctgry_submit").click(function(){$("#dt_rslts_combo").html("").hide();var t=$(this),e=$(this).attr("name"),o=$(this).val(),r=$(this).hasClass("unit");o.length<1&&(o=$(this).text()),bLastTableLoaded=!0,r&&(oCARDINALITY_DICT[e]="unit"),loadCategoryDT(e,o,"dt_rslts_single",bLastTableLoaded),$("#dt_rslts_single").show(),EditorMod.currentCtgryNms=[],EditorMod.currentCtgryNms.push(e),updateChosenHighlight(t),$("#skip_btns_grp").hide()}),$(".multi_cifctgry_submit").click(function(){var t=$(this),e=$(this).attr("id"),o=(e.split("+"),$(this).attr("name")),r=$(this).attr("id"),i=o.split("+");EditorMod.expmethod,initBookKeepingGlobal(),resetDTrsltsArea(),loadMultiCategoryDT(e,i),updateChosenHighlight(t),initSkipCalcControls(r)}),$(document).on("click",".skip_calc",function(){var t=$(this).attr("id").split("_")[1];$(this).attr("value").startsWith("Undo")?undoSkipCalc(t):skipCalc(t)}),$(document).on("click",".cifctgry_add_row",function(){var t=$(this).attr("name");addNewRow(t)}),$(document).on("click",".cifctgry_insert_row",function(){var t=$(this).attr("name");insertRow(t,EditorMod.currentRowSlctd)}),$(document).on("click",".cifctgry_delete_row",function(){var t=$(this).attr("name");deleteRows(t,EditorMod.currentRowSlctd,1)}),$(document).on("click",".jmol_view",function(){var t=$(this).attr("name");launchJmol(t,EditorMod.currentRowSlctd)}),$(document).on("click",".atomic_dt_container tbody tr",function(t){if(t.ctrlKey||t.metaKey)return handleRowSelectForAction($(this),t),!1}),$(document).on("contextmenu",".atomic_dt_container tbody tr",function(t){return handleRowSelectForAction($(this),t),!1}),$(".row_context_menu_choice").click(function(t){var e=$(this).attr("id");return"insertrow"==e?($("#insert_row").dialog("open"),$('select[name="insert_row_quantity"]').val("1"),$("#chckbx_duplicate_viewid").prop("checked",!0),"pdbx_display_view_item_info"==EditorMod.currentRowSlctd_CtgryNm?($("#chckbx_duplicate_prmryheading").prop("checked",!1),$("#checkbox_duplicate_prmryheading").hide(),$("#chckbx_duplicate_subheading").prop("checked",!1),$("#checkbox_duplicate_subheading").hide(),$("#checkbox_duplicate_category_display_name").show(),$("#chckbx_duplicate_category_display_name").prop("checked",!0)):($("#checkbox_duplicate_prmryheading").show(),$("#chckbx_duplicate_prmryheading").prop("checked",!0),$("#checkbox_duplicate_subheading").show(),$("#chckbx_duplicate_subheading").prop("checked",!0),$("#chckbx_duplicate_category_display_name").prop("checked",!1),$("#checkbox_duplicate_category_display_name").hide()),$("#insert_row").dialog("option","position",{my:"left-10 top-40",of:EditorMod.currentRowSlctd_TrNode})):"delrow"==e&&($("#delete_row").dialog("open"),$('select[name="delete_row_quantity"]').val("1"),$("#delete_row").dialog("option","position",{my:"left-10 top-40",of:EditorMod.currentRowSlctd_TrNode})),$("#context_menu").hide(),!1}),$(document).on("click","#savedone",function(){exitEditor("done")}),$(document).on("click","#abort",function(){confirm("Are you sure you want to leave this session and abort all changes?")&&exitEditor("abort")}),$(document).on("click","#saveunfinished",function(){exitEditor("unfinished")}),$(document).on("click",".undototal",function(){var t=$(this).attr("name").split("-")[1];undoEdits(t,"total")}),$(document).on("click",".undoincrmntl",function(){var t=$(this).attr("name").split("-")[1];undoEdits(t,"incremental")}),$(document).on("click",".pulltitle",function(){var t=$(this).attr("name").split("-")[1];propagateTitle(t)}),$("#other-value-form").find("input").keypress(function(t){if(t.which&&13==t.which||t.keyCode&&13==t.keyCode)return $(this).parent().parent().parent().parent().find(".ui-dialog-buttonpane").find("button:first").click(),!1}),$(document).on("click","#togglehdrinputs",function(){var t=$(this);t.attr("name");"Show Column Filters"==t.attr("value")?(t.attr("value","Hide Column Filters"),$("tr.srch_hdrs").show()):(t.attr("value","Show Column Filters"),$("tr.srch_hdrs").hide())}),$(document).on("click",".toggleshowallcols",function(){var t=$(this),e=t.attr("name").split("-")[1];"Show All Fields"==t.attr("value")?(t.attr("value","Show Priority Fields Only"),showHiddenCols(e)):(t.attr("value","Show All Fields"),showJustPriorityCols(e)),$("#toggleshowallcols-"+e).removeClass("ui-state-focus")}),$(document).on("click",".transposevw",function(){var t=$(this),e=t.attr("name").split("-")[1];t.attr("value");transposeTable(e),$("#transposevw-"+e).removeClass("ui-state-focus")}),$(document).on("click","#toggle_em_view",function(){"Load Map+Model View"==$(this).attr("value")?$("#emmodelview").val("y"):$("#emmodelview").val("n"),$("#toggle_em_view").removeClass("ui-state-focus"),$("#hlprfrm").attr("action",EditorMod.URL.RELOAD_PAGE),$("#hlprfrm").submit()}),$(document).on("click","#transpose_vw_all",function(){var t=$(this),e=null;"Transpose View (All)"==t.attr("value")?(t.val("Default View (All)"),e=!0):(t.val("Transpose View (All)"),e=!1);for(var o=null,r=null,i=0;i<EditorMod.currentCtgryNms.length;i++)o=EditorMod.currentCtgryNms[i],r=$("#"+o+"_tbl").dataTable(),bIsThisTableTrnspsd=r.fnTransposeState(),(e&&!bIsThisTableTrnspsd||!e&&bIsThisTableTrnspsd)&&transposeTable(o);$("#transpose_vw_all").removeClass("ui-state-focus")}),$("#testcheckboxes").click(function(){var t="",e=0;$("#dt_rslts_single :checkbox:checked").each(function(){e++,t+=(0<t.length?",":"")+$(this).parents("td").attr("true_row_idx")}),$("#rowids").val(t),0<e?alert("List of row IDs currently selected for cif category '"+EditorMod.currentCtgryNm+"' is: "+t):alert("Currently no row(s) selected for cif category '"+EditorMod.currentCtgryNm+"'")}),$(document).on("click",".select_row",function(){this.checked})});